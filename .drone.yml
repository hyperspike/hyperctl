---
kind: pipeline
name: default

platform:
  os: linux
  arch: amd64

steps:
- name: vet
  image: graytshirt/golang:0.0.5
  commands:
  - make vet
- name: lint
  image: golangci/golangci-lint:v1.31.0-alpine
  commands:
  - golangci-lint run --timeout 5m -v
- name: build
  image: graytshirt/golang:0.0.5
  commands:
  - make build
- name: release
  image: grayshirt/kaniko
  commands:
  - /executor
  when:
    ref:
    - refs/tags/**

